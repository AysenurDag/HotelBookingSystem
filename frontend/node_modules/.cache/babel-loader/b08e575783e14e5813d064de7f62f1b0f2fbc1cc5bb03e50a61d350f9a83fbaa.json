{"ast":null,"code":"// src/services/api.js\nimport axios from \"axios\";\nimport { loginRequest } from \"../msalConfig\";\nimport { msalInstance } from \"../msalInstance\"; // ✅ sadece buradan import et\n\n// Token al ve API'ye yetkili istek gönder\nexport async function getCurrentUser() {\n  const accounts = msalInstance.getAllAccounts();\n  if (!accounts.length) throw new Error(\"No user logged in\");\n  const result = await msalInstance.acquireTokenSilent({\n    ...loginRequest,\n    account: accounts[0]\n  });\n  const token = result.accessToken;\n  // proxy ayarlıysa direkt relative path kullanın:\n  const res = await axios.get(\"http://localhost:5289/api/auth/CurrentUser\", {\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  });\n  return res.data;\n}\n// Örnek: logout işlemi\nexport async function logoutUser() {\n  const accounts = msalInstance.getAllAccounts();\n  if (accounts.length === 0) throw new Error(\"No user logged in\");\n  const response = await msalInstance.acquireTokenSilent({\n    ...loginRequest,\n    account: accounts[0]\n  });\n  const token = response.accessToken;\n  await axios.post(\"http://localhost:5289/api/auth/logout\", {}, {\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  });\n}","map":{"version":3,"names":["axios","loginRequest","msalInstance","getCurrentUser","accounts","getAllAccounts","length","Error","result","acquireTokenSilent","account","token","accessToken","res","get","headers","Authorization","data","logoutUser","response","post"],"sources":["C:/Users/MahsunDağAtolla/Desktop/SchoolProjects/HotelBooking/HotelBookingSystem/frontend/src/services/api.js"],"sourcesContent":["// src/services/api.js\r\nimport axios from \"axios\";\r\nimport { loginRequest } from \"../msalConfig\";\r\nimport { msalInstance } from \"../msalInstance\"; // ✅ sadece buradan import et\r\n\r\n// Token al ve API'ye yetkili istek gönder\r\nexport async function getCurrentUser() {\r\n  const accounts = msalInstance.getAllAccounts();\r\n  if (!accounts.length) throw new Error(\"No user logged in\");\r\n\r\n  const result = await msalInstance.acquireTokenSilent({\r\n    ...loginRequest,\r\n    account: accounts[0],\r\n  });\r\n\r\n  const token = result.accessToken;\r\n  // proxy ayarlıysa direkt relative path kullanın:\r\n  const res = await axios.get(\"http://localhost:5289/api/auth/CurrentUser\", {\r\n    headers: { Authorization: `Bearer ${token}` }\r\n  });\r\n  return res.data;\r\n\r\n}\r\n// Örnek: logout işlemi\r\nexport async function logoutUser() {\r\n  const accounts = msalInstance.getAllAccounts();\r\n  if (accounts.length === 0) throw new Error(\"No user logged in\");\r\n\r\n  const response = await msalInstance.acquireTokenSilent({\r\n    ...loginRequest,\r\n    account: accounts[0]\r\n  });\r\n\r\n  const token = response.accessToken;\r\n\r\n  await axios.post(\"http://localhost:5289/api/auth/logout\", {}, {\r\n    headers: {\r\n      Authorization: `Bearer ${token}`\r\n    }\r\n  });\r\n}\r\n"],"mappings":"AAAA;AACA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,YAAY,QAAQ,eAAe;AAC5C,SAASC,YAAY,QAAQ,iBAAiB,CAAC,CAAC;;AAEhD;AACA,OAAO,eAAeC,cAAcA,CAAA,EAAG;EACrC,MAAMC,QAAQ,GAAGF,YAAY,CAACG,cAAc,CAAC,CAAC;EAC9C,IAAI,CAACD,QAAQ,CAACE,MAAM,EAAE,MAAM,IAAIC,KAAK,CAAC,mBAAmB,CAAC;EAE1D,MAAMC,MAAM,GAAG,MAAMN,YAAY,CAACO,kBAAkB,CAAC;IACnD,GAAGR,YAAY;IACfS,OAAO,EAAEN,QAAQ,CAAC,CAAC;EACrB,CAAC,CAAC;EAEF,MAAMO,KAAK,GAAGH,MAAM,CAACI,WAAW;EAChC;EACA,MAAMC,GAAG,GAAG,MAAMb,KAAK,CAACc,GAAG,CAAC,4CAA4C,EAAE;IACxEC,OAAO,EAAE;MAAEC,aAAa,EAAE,UAAUL,KAAK;IAAG;EAC9C,CAAC,CAAC;EACF,OAAOE,GAAG,CAACI,IAAI;AAEjB;AACA;AACA,OAAO,eAAeC,UAAUA,CAAA,EAAG;EACjC,MAAMd,QAAQ,GAAGF,YAAY,CAACG,cAAc,CAAC,CAAC;EAC9C,IAAID,QAAQ,CAACE,MAAM,KAAK,CAAC,EAAE,MAAM,IAAIC,KAAK,CAAC,mBAAmB,CAAC;EAE/D,MAAMY,QAAQ,GAAG,MAAMjB,YAAY,CAACO,kBAAkB,CAAC;IACrD,GAAGR,YAAY;IACfS,OAAO,EAAEN,QAAQ,CAAC,CAAC;EACrB,CAAC,CAAC;EAEF,MAAMO,KAAK,GAAGQ,QAAQ,CAACP,WAAW;EAElC,MAAMZ,KAAK,CAACoB,IAAI,CAAC,uCAAuC,EAAE,CAAC,CAAC,EAAE;IAC5DL,OAAO,EAAE;MACPC,aAAa,EAAE,UAAUL,KAAK;IAChC;EACF,CAAC,CAAC;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}