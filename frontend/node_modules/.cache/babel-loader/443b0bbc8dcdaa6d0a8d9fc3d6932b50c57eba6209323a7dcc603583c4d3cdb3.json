{"ast":null,"code":"import axios from \"axios\";\nimport { msalConfig, loginRequest } from \"../msalConfig\";\nimport { PublicClientApplication } from \"@azure/msal-browser\";\n\n// MSAL istemcisi oluştur\nconst msalInstance = new PublicClientApplication(msalConfig);\n\n// Token al ve API'ye yetkili istek gönder\nexport async function getCurrentUser() {\n  const accounts = msalInstance.getAllAccounts();\n  if (accounts.length === 0) throw new Error(\"No user logged in\");\n  const response = await msalInstance.acquireTokenSilent({\n    ...loginRequest,\n    account: accounts[0]\n  });\n  const token = response.accessToken;\n  const res = await axios.get(\"http://localhost:5289/api/auth/CurrentUser\", {\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  });\n  return res.data;\n}\n\n// Örnek: logout işlemi\nexport async function logoutUser() {\n  const accounts = msalInstance.getAllAccounts();\n  if (accounts.length === 0) throw new Error(\"No user logged in\");\n  const response = await msalInstance.acquireTokenSilent({\n    ...loginRequest,\n    account: accounts[0]\n  });\n  const token = response.accessToken;\n  await axios.post(\"http://localhost:5289/api/auth/logout\", {}, {\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  });\n}","map":{"version":3,"names":["axios","msalConfig","loginRequest","PublicClientApplication","msalInstance","getCurrentUser","accounts","getAllAccounts","length","Error","response","acquireTokenSilent","account","token","accessToken","res","get","headers","Authorization","data","logoutUser","post"],"sources":["C:/Users/MahsunDağAtolla/Desktop/SchoolProjects/HotelBooking/HotelBookingSystem/frontend/src/services/api.js"],"sourcesContent":["import axios from \"axios\";\r\nimport { msalConfig, loginRequest } from \"../msalConfig\";\r\nimport { PublicClientApplication } from \"@azure/msal-browser\";\r\n\r\n// MSAL istemcisi oluştur\r\nconst msalInstance = new PublicClientApplication(msalConfig);\r\n\r\n// Token al ve API'ye yetkili istek gönder\r\nexport async function getCurrentUser() {\r\n  const accounts = msalInstance.getAllAccounts();\r\n  if (accounts.length === 0) throw new Error(\"No user logged in\");\r\n\r\n  const response = await msalInstance.acquireTokenSilent({\r\n    ...loginRequest,\r\n    account: accounts[0]\r\n  });\r\n\r\n  const token = response.accessToken;\r\n\r\n  const res = await axios.get(\"http://localhost:5289/api/auth/CurrentUser\", {\r\n    headers: {\r\n      Authorization: `Bearer ${token}`\r\n    }\r\n  });\r\n\r\n  return res.data;\r\n}\r\n\r\n// Örnek: logout işlemi\r\nexport async function logoutUser() {\r\n  const accounts = msalInstance.getAllAccounts();\r\n  if (accounts.length === 0) throw new Error(\"No user logged in\");\r\n\r\n  const response = await msalInstance.acquireTokenSilent({\r\n    ...loginRequest,\r\n    account: accounts[0]\r\n  });\r\n\r\n  const token = response.accessToken;\r\n\r\n  await axios.post(\"http://localhost:5289/api/auth/logout\", {}, {\r\n    headers: {\r\n      Authorization: `Bearer ${token}`\r\n    }\r\n  });\r\n}\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,UAAU,EAAEC,YAAY,QAAQ,eAAe;AACxD,SAASC,uBAAuB,QAAQ,qBAAqB;;AAE7D;AACA,MAAMC,YAAY,GAAG,IAAID,uBAAuB,CAACF,UAAU,CAAC;;AAE5D;AACA,OAAO,eAAeI,cAAcA,CAAA,EAAG;EACrC,MAAMC,QAAQ,GAAGF,YAAY,CAACG,cAAc,CAAC,CAAC;EAC9C,IAAID,QAAQ,CAACE,MAAM,KAAK,CAAC,EAAE,MAAM,IAAIC,KAAK,CAAC,mBAAmB,CAAC;EAE/D,MAAMC,QAAQ,GAAG,MAAMN,YAAY,CAACO,kBAAkB,CAAC;IACrD,GAAGT,YAAY;IACfU,OAAO,EAAEN,QAAQ,CAAC,CAAC;EACrB,CAAC,CAAC;EAEF,MAAMO,KAAK,GAAGH,QAAQ,CAACI,WAAW;EAElC,MAAMC,GAAG,GAAG,MAAMf,KAAK,CAACgB,GAAG,CAAC,4CAA4C,EAAE;IACxEC,OAAO,EAAE;MACPC,aAAa,EAAE,UAAUL,KAAK;IAChC;EACF,CAAC,CAAC;EAEF,OAAOE,GAAG,CAACI,IAAI;AACjB;;AAEA;AACA,OAAO,eAAeC,UAAUA,CAAA,EAAG;EACjC,MAAMd,QAAQ,GAAGF,YAAY,CAACG,cAAc,CAAC,CAAC;EAC9C,IAAID,QAAQ,CAACE,MAAM,KAAK,CAAC,EAAE,MAAM,IAAIC,KAAK,CAAC,mBAAmB,CAAC;EAE/D,MAAMC,QAAQ,GAAG,MAAMN,YAAY,CAACO,kBAAkB,CAAC;IACrD,GAAGT,YAAY;IACfU,OAAO,EAAEN,QAAQ,CAAC,CAAC;EACrB,CAAC,CAAC;EAEF,MAAMO,KAAK,GAAGH,QAAQ,CAACI,WAAW;EAElC,MAAMd,KAAK,CAACqB,IAAI,CAAC,uCAAuC,EAAE,CAAC,CAAC,EAAE;IAC5DJ,OAAO,EAAE;MACPC,aAAa,EAAE,UAAUL,KAAK;IAChC;EACF,CAAC,CAAC;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}